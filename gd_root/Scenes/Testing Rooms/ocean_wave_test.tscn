[gd_scene load_steps=13 format=4 uid="uid://dcead5xl6alc2"]

[ext_resource type="Script" path="res://Scripts/Rooms/water/water_generator.gd" id="1_6mwv2"]
[ext_resource type="Shader" path="res://Scripts/Shaders/water_shader.gdshader" id="2_rqxs0"]
[ext_resource type="Shader" path="res://Scripts/Shaders/ocean_generation.gdshader" id="3_q7i4j"]
[ext_resource type="Material" uid="uid://besr6d88tc006" path="res://Scripts/Shaders/water_shader_main.tres" id="4_oovnq"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ewc64"]
render_priority = 0
shader = ExtResource("2_rqxs0")
shader_parameter/color1 = Color(0, 0.27451, 0.376471, 1)
shader_parameter/color2 = Color(0, 0.160784, 0.227451, 1)
shader_parameter/color3 = Color(0, 0.34902, 0.47451, 1)
shader_parameter/x_amount = 128.0
shader_parameter/y_amount = 128.0

[sub_resource type="ArrayMesh" id="ArrayMesh_tmuh6"]
_surfaces = [{
"aabb": AABB(0, 0.0230257, 0, 10, 0.476974, 10),
"attribute_data": PackedByteArray("AAAAAAAAAADNzMw9AAAAAAAAAADNzMw9zczMPc3MzD3NzEw+AAAAAM3MTD7NzMw9mpmZPgAAAACamZk+zczMPc3MzD4AAAAAzczMPs3MzD0AAAA/AAAAAAAAAD/NzMw9mpkZPwAAAACamRk/zczMPTMzMz8AAAAAMzMzP83MzD3NzEw/AAAAAM3MTD/NzMw9ZmZmPwAAAABmZmY/zczMPQAAgD8AAAAAAACAP83MzD0AAAAAzcxMPs3MzD3NzEw+zcxMPs3MTD6amZk+zcxMPs3MzD7NzEw+AAAAP83MTD6amRk/zcxMPjMzMz/NzEw+zcxMP83MTD5mZmY/zcxMPgAAgD/NzEw+AAAAAJqZmT7NzMw9mpmZPs3MTD6amZk+mpmZPpqZmT7NzMw+mpmZPgAAAD+amZk+mpkZP5qZmT4zMzM/mpmZPs3MTD+amZk+ZmZmP5qZmT4AAIA/mpmZPgAAAADNzMw+zczMPc3MzD7NzEw+zczMPpqZmT7NzMw+zczMPs3MzD4AAAA/zczMPpqZGT/NzMw+MzMzP83MzD7NzEw/zczMPmZmZj/NzMw+AACAP83MzD4AAAAAAAAAP83MzD0AAAA/zcxMPgAAAD+amZk+AAAAP83MzD4AAAA/AAAAPwAAAD+amRk/AAAAPzMzMz8AAAA/zcxMPwAAAD9mZmY/AAAAPwAAgD8AAAA/AAAAAJqZGT/NzMw9mpkZP83MTD6amRk/mpmZPpqZGT/NzMw+mpkZPwAAAD+amRk/mpkZP5qZGT8zMzM/mpkZP83MTD+amRk/ZmZmP5qZGT8AAIA/mpkZPwAAAAAzMzM/zczMPTMzMz/NzEw+MzMzP5qZmT4zMzM/zczMPjMzMz8AAAA/MzMzP5qZGT8zMzM/MzMzPzMzMz/NzEw/MzMzP2ZmZj8zMzM/AACAPzMzMz8AAAAAzcxMP83MzD3NzEw/zcxMPs3MTD+amZk+zcxMP83MzD7NzEw/AAAAP83MTD+amRk/zcxMPzMzMz/NzEw/zcxMP83MTD9mZmY/zcxMPwAAgD/NzEw/AAAAAGZmZj/NzMw9ZmZmP83MTD5mZmY/mpmZPmZmZj/NzMw+ZmZmPwAAAD9mZmY/mpkZP2ZmZj8zMzM/ZmZmP83MTD9mZmY/ZmZmP2ZmZj8AAIA/ZmZmPwAAAAAAAIA/zczMPQAAgD/NzEw+AACAP5qZmT4AAIA/zczMPgAAgD8AAAA/AACAP5qZGT8AAIA/MzMzPwAAgD/NzEw/AACAP2ZmZj8AAIA/AACAPwAAgD8="),
"format": 34359742487,
"index_count": 600,
"index_data": PackedByteArray("AAABAAIAAgABAAMAAQAEAAMAAwAEAAUABAAGAAUABQAGAAcABgAIAAcABwAIAAkACAAKAAkACQAKAAsACgAMAAsACwAMAA0ADAAOAA0ADQAOAA8ADgAQAA8ADwAQABEAEAASABEAEQASABMAEgAUABMAEwAUABUAAgADABYAFgADABcAAwAFABcAFwAFABgABQAHABgAGAAHABkABwAJABkAGQAJABoACQALABoAGgALABsACwANABsAGwANABwADQAPABwAHAAPAB0ADwARAB0AHQARAB4AEQATAB4AHgATAB8AEwAVAB8AHwAVACAAFgAXACEAIQAXACIAFwAYACIAIgAYACMAGAAZACMAIwAZACQAGQAaACQAJAAaACUAGgAbACUAJQAbACYAGwAcACYAJgAcACcAHAAdACcAJwAdACgAHQAeACgAKAAeACkAHgAfACkAKQAfACoAHwAgACoAKgAgACsAIQAiACwALAAiAC0AIgAjAC0ALQAjAC4AIwAkAC4ALgAkAC8AJAAlAC8ALwAlADAAJQAmADAAMAAmADEAJgAnADEAMQAnADIAJwAoADIAMgAoADMAKAApADMAMwApADQAKQAqADQANAAqADUAKgArADUANQArADYALAAtADcANwAtADgALQAuADgAOAAuADkALgAvADkAOQAvADoALwAwADoAOgAwADsAMAAxADsAOwAxADwAMQAyADwAPAAyAD0AMgAzAD0APQAzAD4AMwA0AD4APgA0AD8ANAA1AD8APwA1AEAANQA2AEAAQAA2AEEANwA4AEIAQgA4AEMAOAA5AEMAQwA5AEQAOQA6AEQARAA6AEUAOgA7AEUARQA7AEYAOwA8AEYARgA8AEcAPAA9AEcARwA9AEgAPQA+AEgASAA+AEkAPgA/AEkASQA/AEoAPwBAAEoASgBAAEsAQABBAEsASwBBAEwAQgBDAE0ATQBDAE4AQwBEAE4ATgBEAE8ARABFAE8ATwBFAFAARQBGAFAAUABGAFEARgBHAFEAUQBHAFIARwBIAFIAUgBIAFMASABJAFMAUwBJAFQASQBKAFQAVABKAFUASgBLAFUAVQBLAFYASwBMAFYAVgBMAFcATQBOAFgAWABOAFkATgBPAFkAWQBPAFoATwBQAFoAWgBQAFsAUABRAFsAWwBRAFwAUQBSAFwAXABSAF0AUgBTAF0AXQBTAF4AUwBUAF4AXgBUAF8AVABVAF8AXwBVAGAAVQBWAGAAYABWAGEAVgBXAGEAYQBXAGIAWABZAGMAYwBZAGQAWQBaAGQAZABaAGUAWgBbAGUAZQBbAGYAWwBcAGYAZgBcAGcAXABdAGcAZwBdAGgAXQBeAGgAaABeAGkAXgBfAGkAaQBfAGoAXwBgAGoAagBgAGsAYABhAGsAawBhAGwAYQBiAGwAbABiAG0AYwBkAG4AbgBkAG8AZABlAG8AbwBlAHAAZQBmAHAAcABmAHEAZgBnAHEAcQBnAHIAZwBoAHIAcgBoAHMAaABpAHMAcwBpAHQAaQBqAHQAdABqAHUAagBrAHUAdQBrAHYAawBsAHYAdgBsAHcAbABtAHcAdwBtAHgA"),
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 121,
"vertex_data": PackedByteArray("AAAAAAAAAD8AAAAAAACAPwAAAD8AAAAAAAAAAAAAAD8AAIA/AACAPwAAAD8AAIA/AAAAQA2H8j4AAAAAAAAAQAAAAD8AAIA/AABAQJxF7D4AAAAAAABAQAAAAD8AAIA/AACAQHr49T4AAAAAAACAQAAAAD8AAIA/AACgQAAAAD8AAAAAAACgQAAAAD8AAIA/AADAQFfE8z4AAAAAAADAQAAAAD8AAIA/AADgQGEcuD4AAAAAAADgQFAc+T4AAIA/AAAAQVwFQD4AAAAAAAAAQVPTmD4AAIA/AAAQQRrwjz0AAAAAAAAQQSzJHj4AAIA/AAAgQcReIj0AAAAAAAAgQbiswz0AAIA/AAAAAAAAAD8AAABAAACAPwAAAD8AAABAAAAAQAAAAD8AAABAAABAQAAAAD8AAABAAACAQAAAAD8AAABAAACgQAAAAD8AAABAAADAQAAAAD8AAABAAADgQAAAAD8AAABAAAAAQVdarD4AAABAAAAQQfiyNj4AAABAAAAgQZe73z0AAABAAAAAAAAAAD8AAEBAAACAPwAAAD8AAEBAAAAAQAAAAD8AAEBAAABAQAAAAD8AAEBAAACAQAAAAD8AAEBAAACgQAAAAD8AAEBAAADAQAAAAD8AAEBAAADgQAAAAD8AAEBAAAAAQfFimz4AAEBAAAAQQfMPAj4AAEBAAAAgQSsVnD0AAEBAAAAAAAAAAD8AAIBAAACAPwAAAD8AAIBAAAAAQAAAAD8AAIBAAABAQAAAAD8AAIBAAACAQAAAAD8AAIBAAACgQAAAAD8AAIBAAADAQAAAAD8AAIBAAADgQAAAAD8AAIBAAAAAQbY7tj4AAIBAAAAQQULRFz4AAIBAAAAgQYfHQD0AAIBAAAAAAAAAAD8AAKBAAACAPwAAAD8AAKBAAAAAQAAAAD8AAKBAAABAQAAAAD8AAKBAAACAQAAAAD8AAKBAAACgQAAAAD8AAKBAAADAQAAAAD8AAKBAAADgQAAAAD8AAKBAAAAAQYVq1z4AAKBAAAAQQTrlRz4AAKBAAAAgQVegvDwAAKBAAAAAAAAAAD8AAMBAAACAPwAAAD8AAMBAAAAAQAAAAD8AAMBAAABAQAAAAD8AAMBAAACAQAAAAD8AAMBAAACgQAAAAD8AAMBAAADAQAAAAD8AAMBAAADgQAAAAD8AAMBAAAAAQbCl4j4AAMBAAAAQQVgWaT4AAMBAAAAgQb3fRj0AAMBAAAAAAAAAAD8AAOBAAACAPwAAAD8AAOBAAAAAQAAAAD8AAOBAAABAQAAAAD8AAOBAAACAQAAAAD8AAOBAAACgQAAAAD8AAOBAAADAQAAAAD8AAOBAAADgQAAAAD8AAOBAAAAAQQAAAD8AAOBAAAAQQYgtwj4AAOBAAAAgQTB/dj4AAOBAAAAAAAAAAD8AAABBAACAPwAAAD8AAABBAAAAQAAAAD8AAABBAABAQAAAAD8AAABBAACAQAAAAD8AAABBAACgQAAAAD8AAABBAADAQAAAAD8AAABBAADgQAAAAD8AAABBAAAAQQAAAD8AAABBAAAQQQAAAD8AAABBAAAgQX3N6j4AAABBAAAAAAAAAD8AABBBAACAPwAAAD8AABBBAAAAQAAAAD8AABBBAABAQAAAAD8AABBBAACAQAAAAD8AABBBAACgQAAAAD8AABBBAADAQAAAAD8AABBBAADgQAAAAD8AABBBAAAAQQAAAD8AABBBAAAQQQAAAD8AABBBAAAgQQAAAD8AABBBAAAAAAAAAD8AACBBAACAPwAAAD8AACBBAAAAQAAAAD8AACBBAABAQAAAAD8AACBBAACAQAAAAD8AACBBAACgQAAAAD8AACBBAADAQAAAAD8AACBBAADgQAAAAD8AACBBAAAAQQAAAD8AACBBAAAQQQAAAD8AACBBAAAgQQAAAD8AACBB/3///wAA/78cgeL+HwGNwP9///8AAP+/HIFw/40AjcDFg2b+jgHbwSqCvf86ABDBd3u4/2wAqb2UfZn/bQDFvjl7af6pAZS9wX6V/2sAX78CgdD/LQB/wAKBff+AAIDAiIdg+poFocNrhhn9zAIgw66UOvUWCpDJp5GB9TEKO8igmwrwSQ9szFqXjO+GEH7KeJST9bMJecnAkP703grMxz6N0vqlBEbG94qn+EYHOsX/f///AAD/v/9///8AAP+//3///wAA/7//f///AAD/v/9///8AAP+//3///wAA/7+RgLX/SABIwDSLDPYBCjXFipIR7v8T2cgJjYnxvA9sxmyHy/WOCqnD/3///wAA/7//f///AAD/v/9///8AAP+//3///wAA/7//f///AAD/v/9///8AAP+//3///wAA/7+4iqP0PQxQxf6Sxez3FUDJxI1x8f8PyMb+h2L2FAr3w/9///8AAP+//3///wAA/7//f///AAD/v/9///8AAP+//3///wAA/7//f///AAD/v/9///8AAP+/coqS9noJ3sSHlQHvSRGUyTyT3O9sEJLIKo6Z8fAP+8b/f///AAD/v/9///8AAP+//3///wAA/7//f///AAD/v/9///8AAP+//3///wAA/7//f///AAD/v1uH7/kQBofDq5NK8O4P1MhOlnLsvBTtyQ2UKe3JFFzJ/3///wAA/7//f///AAD/v/9///8AAP+//3///wAA/7//f///AAD/v/9///8AAP+//3///wAA/79whAH8/QMnwpKR7vE2DvrHBZqg7Y4SisulnIrvuQ/WzP9///8AAP+//3///wAA/7//f///AAD/v/9///8AAP+//3///wAA/7//f///AAD/v/9///8AAP+/ZYLM/jABL8GmjWH3eghzxqOYA/TOCjvLOpxm9doHl8z/f///AAD/v/9///8AAP+//3///wAA/7//f///AAD/v/9///8AAP+//3///wAA/7//f///AAD/v/9///8AAP+/7YSI/WsCasLwjMf7lQMdxvuM1fxYAhXG/3///wAA/7//f///AAD/v/9///8AAP+//3///wAA/7//f///AAD/v/9///8AAP+//3///wAA/7//f///AAD/v/9///8AAP+/vYEg/90A3MC9gf//BgAdv/9///8AAP+//3///wAA/7//f///AAD/v/9///8AAP+//3///wAA/7//f///AAD/v/9///8AAP+//3///wAA/7//f///AAD/v/9///8AAP+//3///wAA/78=")
}]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_onrqr"]
noise_type = 2
frequency = 0.003
cellular_distance_function = 1

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_61edl"]
generate_mipmaps = false
seamless = true
seamless_blend_skirt = 1.0
noise = SubResource("FastNoiseLite_onrqr")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_xs2a8"]
render_priority = 0
shader = ExtResource("3_q7i4j")
shader_parameter/water_color = Color(0.230539, 0.398765, 0.636181, 1)
shader_parameter/metallic = 0.5
shader_parameter/roughness = 0.5
shader_parameter/noise_tex = SubResource("NoiseTexture2D_61edl")

[sub_resource type="BoxMesh" id="BoxMesh_grxgb"]
material = SubResource("ShaderMaterial_xs2a8")
size = Vector3(10, 2, 10)

[sub_resource type="QuadMesh" id="QuadMesh_nyx4x"]
subdivide_width = 200
subdivide_depth = 200
orientation = 1

[sub_resource type="BoxMesh" id="BoxMesh_pp6hl"]
size = Vector3(0.2, 0.2, 0.2)

[node name="ocean_wave_test" type="Node3D"]

[node name="water_mesh" type="MeshInstance3D" parent="."]
visible = false
material_override = SubResource("ShaderMaterial_ewc64")
mesh = SubResource("ArrayMesh_tmuh6")
script = ExtResource("1_6mwv2")
xSize = 10
zSize = 10
vert_distance = 1
noise_intensity = 2.0
time = 45.6

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
visible = false
mesh = SubResource("BoxMesh_grxgb")

[node name="water_plane" type="MeshInstance3D" parent="."]
cast_shadow = 0
mesh = SubResource("QuadMesh_nyx4x")
surface_material_override/0 = ExtResource("4_oovnq")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0843821, 0)
visible = false
mesh = SubResource("BoxMesh_pp6hl")
skeleton = NodePath("../water_plane")
