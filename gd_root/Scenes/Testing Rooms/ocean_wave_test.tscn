[gd_scene load_steps=20 format=4 uid="uid://dcead5xl6alc2"]

[ext_resource type="Script" path="res://Scripts/Rooms/water/water_generator.gd" id="1_6mwv2"]
[ext_resource type="Shader" path="res://Scripts/Shaders/water_shader.gdshader" id="2_rqxs0"]
[ext_resource type="Shader" path="res://Scripts/Shaders/ocean_generation.gdshader" id="3_q7i4j"]
[ext_resource type="Shader" path="res://Scripts/Shaders/water.gdshader" id="4_5abh3"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ewc64"]
render_priority = 0
shader = ExtResource("2_rqxs0")
shader_parameter/color1 = Color(0, 0.27451, 0.376471, 1)
shader_parameter/color2 = Color(0, 0.160784, 0.227451, 1)
shader_parameter/color3 = Color(0, 0.34902, 0.47451, 1)
shader_parameter/x_amount = 128.0
shader_parameter/y_amount = 128.0

[sub_resource type="ArrayMesh" id="ArrayMesh_836xy"]
_surfaces = [{
"aabb": AABB(0, 0.0679225, 0, 10, 0.0537261, 10),
"attribute_data": PackedByteArray("AAAAAAAAAADNzMw9AAAAAAAAAADNzMw9zczMPc3MzD3NzEw+AAAAAM3MTD7NzMw9mpmZPgAAAACamZk+zczMPc3MzD4AAAAAzczMPs3MzD0AAAA/AAAAAAAAAD/NzMw9mpkZPwAAAACamRk/zczMPTMzMz8AAAAAMzMzP83MzD3NzEw/AAAAAM3MTD/NzMw9ZmZmPwAAAABmZmY/zczMPQAAgD8AAAAAAACAP83MzD0AAAAAzcxMPs3MzD3NzEw+zcxMPs3MTD6amZk+zcxMPs3MzD7NzEw+AAAAP83MTD6amRk/zcxMPjMzMz/NzEw+zcxMP83MTD5mZmY/zcxMPgAAgD/NzEw+AAAAAJqZmT7NzMw9mpmZPs3MTD6amZk+mpmZPpqZmT7NzMw+mpmZPgAAAD+amZk+mpkZP5qZmT4zMzM/mpmZPs3MTD+amZk+ZmZmP5qZmT4AAIA/mpmZPgAAAADNzMw+zczMPc3MzD7NzEw+zczMPpqZmT7NzMw+zczMPs3MzD4AAAA/zczMPpqZGT/NzMw+MzMzP83MzD7NzEw/zczMPmZmZj/NzMw+AACAP83MzD4AAAAAAAAAP83MzD0AAAA/zcxMPgAAAD+amZk+AAAAP83MzD4AAAA/AAAAPwAAAD+amRk/AAAAPzMzMz8AAAA/zcxMPwAAAD9mZmY/AAAAPwAAgD8AAAA/AAAAAJqZGT/NzMw9mpkZP83MTD6amRk/mpmZPpqZGT/NzMw+mpkZPwAAAD+amRk/mpkZP5qZGT8zMzM/mpkZP83MTD+amRk/ZmZmP5qZGT8AAIA/mpkZPwAAAAAzMzM/zczMPTMzMz/NzEw+MzMzP5qZmT4zMzM/zczMPjMzMz8AAAA/MzMzP5qZGT8zMzM/MzMzPzMzMz/NzEw/MzMzP2ZmZj8zMzM/AACAPzMzMz8AAAAAzcxMP83MzD3NzEw/zcxMPs3MTD+amZk+zcxMP83MzD7NzEw/AAAAP83MTD+amRk/zcxMPzMzMz/NzEw/zcxMP83MTD9mZmY/zcxMPwAAgD/NzEw/AAAAAGZmZj/NzMw9ZmZmP83MTD5mZmY/mpmZPmZmZj/NzMw+ZmZmPwAAAD9mZmY/mpkZP2ZmZj8zMzM/ZmZmP83MTD9mZmY/ZmZmP2ZmZj8AAIA/ZmZmPwAAAAAAAIA/zczMPQAAgD/NzEw+AACAP5qZmT4AAIA/zczMPgAAgD8AAAA/AACAP5qZGT8AAIA/MzMzPwAAgD/NzEw/AACAP2ZmZj8AAIA/AACAPwAAgD8="),
"format": 34359742487,
"index_count": 600,
"index_data": PackedByteArray("AAABAAIAAgABAAMAAQAEAAMAAwAEAAUABAAGAAUABQAGAAcABgAIAAcABwAIAAkACAAKAAkACQAKAAsACgAMAAsACwAMAA0ADAAOAA0ADQAOAA8ADgAQAA8ADwAQABEAEAASABEAEQASABMAEgAUABMAEwAUABUAAgADABYAFgADABcAAwAFABcAFwAFABgABQAHABgAGAAHABkABwAJABkAGQAJABoACQALABoAGgALABsACwANABsAGwANABwADQAPABwAHAAPAB0ADwARAB0AHQARAB4AEQATAB4AHgATAB8AEwAVAB8AHwAVACAAFgAXACEAIQAXACIAFwAYACIAIgAYACMAGAAZACMAIwAZACQAGQAaACQAJAAaACUAGgAbACUAJQAbACYAGwAcACYAJgAcACcAHAAdACcAJwAdACgAHQAeACgAKAAeACkAHgAfACkAKQAfACoAHwAgACoAKgAgACsAIQAiACwALAAiAC0AIgAjAC0ALQAjAC4AIwAkAC4ALgAkAC8AJAAlAC8ALwAlADAAJQAmADAAMAAmADEAJgAnADEAMQAnADIAJwAoADIAMgAoADMAKAApADMAMwApADQAKQAqADQANAAqADUAKgArADUANQArADYALAAtADcANwAtADgALQAuADgAOAAuADkALgAvADkAOQAvADoALwAwADoAOgAwADsAMAAxADsAOwAxADwAMQAyADwAPAAyAD0AMgAzAD0APQAzAD4AMwA0AD4APgA0AD8ANAA1AD8APwA1AEAANQA2AEAAQAA2AEEANwA4AEIAQgA4AEMAOAA5AEMAQwA5AEQAOQA6AEQARAA6AEUAOgA7AEUARQA7AEYAOwA8AEYARgA8AEcAPAA9AEcARwA9AEgAPQA+AEgASAA+AEkAPgA/AEkASQA/AEoAPwBAAEoASgBAAEsAQABBAEsASwBBAEwAQgBDAE0ATQBDAE4AQwBEAE4ATgBEAE8ARABFAE8ATwBFAFAARQBGAFAAUABGAFEARgBHAFEAUQBHAFIARwBIAFIAUgBIAFMASABJAFMAUwBJAFQASQBKAFQAVABKAFUASgBLAFUAVQBLAFYASwBMAFYAVgBMAFcATQBOAFgAWABOAFkATgBPAFkAWQBPAFoATwBQAFoAWgBQAFsAUABRAFsAWwBRAFwAUQBSAFwAXABSAF0AUgBTAF0AXQBTAF4AUwBUAF4AXgBUAF8AVABVAF8AXwBVAGAAVQBWAGAAYABWAGEAVgBXAGEAYQBXAGIAWABZAGMAYwBZAGQAWQBaAGQAZABaAGUAWgBbAGUAZQBbAGYAWwBcAGYAZgBcAGcAXABdAGcAZwBdAGgAXQBeAGgAaABeAGkAXgBfAGkAaQBfAGoAXwBgAGoAagBgAGsAYABhAGsAawBhAGwAYQBiAGwAbABiAG0AYwBkAG4AbgBkAG8AZABlAG8AbwBlAHAAZQBmAHAAcABmAHEAZgBnAHEAcQBnAHIAZwBoAHIAcgBoAHMAaABpAHMAcwBpAHQAaQBqAHQAdABqAHUAagBrAHUAdQBrAHYAawBsAHYAdgBsAHcAbABtAHcAdwBtAHgA"),
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 121,
"vertex_data": PackedByteArray("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iQCfvy9/of9dAJe/N3+i/1wAmr88f5//XwCdv0B/m/9jAJ+/RH+X/2cAob9Hf5L/bACjv0l/jf9xAKS/S3+H/3cApb9Lf4H/fQClv0x/fP+CAKW/UH97/4MAqL8/f6n/VgCfv0d/qv9UAKO/TX+n/1cApr9Sf6T/WgCov1Z/n/9fAKq/WX+a/2QArL9bf5T/agCtv1x/jv9wAK2/XH+I/3YArr9cf4H/fQCuv2B/gP9+ALC/UH+x/00Ap79Yf7L/TACrv15/sP9OAK6/Y3+s/1IAsb9nf6j/VwCzv2l/ov9cALS/a3+c/2IAtb9sf5X/aQC1v2x/jv9wALW/a3+H/3cAtb9uf4b/eAC3v19/uf9FAK+/aH+7/0MAs79tf7j/RgC2v3J/tf9KALi/dn+w/04Aur94f6r/VAC7v3l/pP9bALy/eX+c/2IAvL95f5X/aQC8v3d/jf9xALu/en+L/3MAvL9uf8H/PQC2v3Z/w/87ALq/fH/A/z4Avb+Af73/QQC/v4N/uP9GAMG/hX+y/0wAwr+Gf6v/UwDCv4V/o/9bAMK/g3+b/2MAwb+Bf5P/awDAv4N/kP9uAMG/fH/J/zUAvb+Df8v/NADBv4h/yP82AMO/jH/F/zkAxb+Pf8D/PgDHv5B/uf9FAMe/kH+y/0wAx7+Of6r/VADGv4x/of9dAMW/iX+Y/2YAxL+Kf5b/aADEv4Z/z/8vAMK/jH/P/y8Axb+Rf83/MQDIv5R/yf81AMm/ln/E/zsAyr+Xf73/QQDLv5Z/tf9JAMq/lH+t/1EAyb+Rf6T/WgDIv41/mv9kAMa/j3+Z/2UAx78=")
}]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_onrqr"]
noise_type = 2
frequency = 0.003
cellular_distance_function = 1

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_61edl"]
generate_mipmaps = false
seamless = true
seamless_blend_skirt = 1.0
noise = SubResource("FastNoiseLite_onrqr")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_xs2a8"]
render_priority = 0
shader = ExtResource("3_q7i4j")
shader_parameter/water_color = Color(0.230539, 0.398765, 0.636181, 1)
shader_parameter/metallic = 0.5
shader_parameter/roughness = 0.5
shader_parameter/noise_tex = SubResource("NoiseTexture2D_61edl")

[sub_resource type="BoxMesh" id="BoxMesh_grxgb"]
material = SubResource("ShaderMaterial_xs2a8")
size = Vector3(10, 2, 10)

[sub_resource type="QuadMesh" id="QuadMesh_nyx4x"]
subdivide_width = 200
subdivide_depth = 200
orientation = 1

[sub_resource type="FastNoiseLite" id="FastNoiseLite_x8nqh"]
noise_type = 3
fractal_type = 2

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_yp1wm"]
seamless = true
as_normal_map = true
bump_strength = 1.5
noise = SubResource("FastNoiseLite_x8nqh")

[sub_resource type="FastNoiseLite" id="FastNoiseLite_whysj"]
noise_type = 3
seed = 10
fractal_type = 2

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_vampg"]
seamless = true
as_normal_map = true
bump_strength = 1.5
noise = SubResource("FastNoiseLite_whysj")

[sub_resource type="FastNoiseLite" id="FastNoiseLite_kbm4j"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_b7jhs"]
seamless = true
noise = SubResource("FastNoiseLite_kbm4j")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_igb0p"]
render_priority = 0
shader = ExtResource("4_5abh3")
shader_parameter/albedo = Color(0, 0.321569, 0.431373, 1)
shader_parameter/metallic = 0.0
shader_parameter/roughness = 0.02
shader_parameter/wave_direction = Vector2(2, 0)
shader_parameter/wave_direction2 = Vector2(0, 1)
shader_parameter/time_scale = 0.025
shader_parameter/noise_scale = 10.0
shader_parameter/height_scale = 0.15
shader_parameter/albedo2 = Color(0, 0.47451, 0.764706, 1)
shader_parameter/color_deep = Color(0, 0, 0, 1)
shader_parameter/color_shallow = null
shader_parameter/beers_law = 2.0
shader_parameter/depth_offset = 1.5
shader_parameter/edge_scale = 0.1
shader_parameter/near = 1.0
shader_parameter/far = 100.0
shader_parameter/edge_color = Color(0, 0, 0, 1)
shader_parameter/texture_normal = SubResource("NoiseTexture2D_yp1wm")
shader_parameter/texture_normal2 = SubResource("NoiseTexture2D_vampg")
shader_parameter/wave = SubResource("NoiseTexture2D_b7jhs")

[sub_resource type="BoxMesh" id="BoxMesh_pp6hl"]
size = Vector3(0.2, 0.2, 0.2)

[node name="ocean_wave_test" type="Node3D"]

[node name="water_mesh" type="MeshInstance3D" parent="."]
visible = false
material_override = SubResource("ShaderMaterial_ewc64")
mesh = SubResource("ArrayMesh_836xy")
script = ExtResource("1_6mwv2")
xSize = 10
zSize = 10
vert_distance = 1
terrain_height = 2

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
visible = false
mesh = SubResource("BoxMesh_grxgb")

[node name="water_plane" type="MeshInstance3D" parent="."]
cast_shadow = 0
mesh = SubResource("QuadMesh_nyx4x")
surface_material_override/0 = SubResource("ShaderMaterial_igb0p")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.118342, 0)
mesh = SubResource("BoxMesh_pp6hl")
skeleton = NodePath("../water_plane")
